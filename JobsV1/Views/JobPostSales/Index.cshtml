@model IEnumerable<JobsV1.Models.JobPostSale>

@{
    ViewBag.Title = "Post Sales";
    Layout = "~/Views/Shared/_ModuleLayout.cshtml";
}
    <div class="panel">
        <h2>Post Sales for Today </h2>

        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
        <table class="table">
            <tr>
                <th>
                    Plate
                </th>
                <th>
                    Conduction
                </th>
                <th>
                    Customer
                </th>
                <th>
                    Contact
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                var job = item.JobService.JobMain;
                var vehicle = job.JobVehicles.FirstOrDefault();
                var customer = job.Customer;
                if (vehicle != null)
                {

                    <tr>
                        <td>
                            @vehicle.Vehicle.PlateNo
                        </td>
                        <td>
                            @vehicle.Vehicle.Conduction
                        </td>
                        <td>
                            @customer.Name
                        </td>
                        <td>
                            @customer.Contact1

                            @if (!customer.Contact2.IsEmpty())
                            {
                                <span> | @customer.Contact2  </span>
                            }
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                            @Html.ActionLink("Job Service", "JobServices", "JobOrder", new { JobMainId = job.Id }, null) |
                            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                        </td>
                    </tr>
                }

            }

            @if (Model.Count() == 0)
            {
                <tr>
                    <td colspan="5">
                        <p style="text-align:center;"> No post sales data available </p>
                    </td>
                </tr>
            }

        </table>
    </div>
