@model JobsV1.Models.CustEntMain

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_ModuleLayout.cshtml";
    int customerid = Model.Id;
}

<h2>Company Details</h2>

<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
    @Html.ActionLink("Back to List", "Index")
</p>


<div class="row">
    <div class="col-lg-12">
        <h3> @Html.DisplayFor(model => model.Name) </h3>
        <h5>Contact: @Html.DisplayFor(model => model.Contact1) / @Html.DisplayFor(model => model.Contact2) </h5>
        <h5>Address: @Html.DisplayFor(model => model.Address) </h5>
    </div>
</div>

<div>
    <h3>Customers </h3>
    @foreach (var customers in Model.CustEntities as IEnumerable<JobsV1.Models.CustEntity>)
    {
        <p> 
            <h4>
                @Html.ActionLink(customers.Customer.Name, "Edit", "Customers", new { id = Model.Id }, null)
            </h4>
        </p>
    }
</div>
<hr />
<div class="row">

    <p>
        <b>Date: </b>
        <input id="startDate" type="date" /> -
        <input id="endDate" type="date" />
        &nbsp;&nbsp;&nbsp;
        <a onclick="getLastJobs(30)">Last 30 Days</a> 
        <a onclick="getLastJobs(60)">Last 60 Days</a>
        &nbsp;&nbsp;&nbsp;
        <input type="button" value="Filter" class="btn btn-default" style="margin-top:-10px;padding:5px;" onclick="detailsUpdate(@customerid)" />
    </p>
    <p id="StatusOp">
        <b>Status: </b>
        <a onclick="statusUpdate('ALL')"            id="ALL">         ALL</a> |
        <a onclick="statusUpdate('INQUIRY')"        id="INQUIRY">     INQUIRY</a> |
        <a onclick="statusUpdate('RESERVATION')"    id="RESERVATION"> RESERVATION</a> |
        <a onclick="statusUpdate('CONFIRMED')"      id="CONFIRMED">   CONFIRMED</a> |
        <a onclick="statusUpdate('CLOSED')"         id="CLOSED">      CLOSED</a> |
        <a onclick="statusUpdate('CANCELLED')"      id="CANCELLED">   CANCELLED</a>
    </p>

    <table class="table table-striped">
        <tr>
            <th>Job Date</th>
            <th>Description</th>
            <th>Customer</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Details</th>
        </tr>
        @foreach (var job in ViewBag.CompanyJobs as IEnumerable<JobsV1.Models.JobMain>)
        {
            <tr>
                <td>@job.JobDate</td>
                <td>@job.Description</td>
                <td>@job.Customer.Name</td>
                <td>@job.AgreedAmt</td>
                <td>@job.JobStatus.Status</td>
                <td>
                    @Html.ActionLink("Details", "BookingDetails", "JobOrder", new { id = job.Id }, null)
                </td>
            </tr>
        }
    </table>
</div>

<script src="~/Scripts/jquery-1.12.4.min.js"> </script>
<script src="~/Scripts/DateRangePicker/moment.min.js"></script>
<script src="~/Scripts/Job/CompanyReport.js"> </script>

