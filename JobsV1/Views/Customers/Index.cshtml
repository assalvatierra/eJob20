@model IEnumerable<JobsV1.Models.CustomerDetails >

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_ModuleLayout.cshtml";
}

<h2>Customer List</h2>

@*<p>
        @Html.ActionLink("Active", "Index", new { status = "ACTIVE" }, new { @id = "ACTIVE" }) |
        @Html.ActionLink("Inactive", "Index", new { status = "INACTIVE" }, new { @id = "INACTIVE" }) |
        @Html.ActionLink("Bad", "Index", new { status = "BAD" }, new { @id = "BAD" }) |
        @Html.ActionLink("All", "Index", new { status = "ALL" }, new { @id = "ALL" })
    </p>
*@
<p>
    @Html.ActionLink("Create New", "Create") |
    @Html.ActionLink("Deactivate Old Users", "DeactivateOldCustomer")
</p>
<p>
    Status:
    <span>
        <span id="ACTIVE"   class="status-link status-active"> Active   </span> |
        <span id="INACTIVE" class="status-link"> Inactive </span> |
        <span id="BAD"      class="status-link"> Bad      </span> |
        <span id="ALL"      class="status-link"> All      </span>
    </span>
</p>


<p>
    <input class="input-sm" id="srch-field" type="search" />
    <button class="btn btn-default" onclick="ajax_loadContent()">Search</button>
</p>


<table class="table " id="sup-Table">
    <tr>
        <th>Customer</th>
        <th>Contact 1 </th>
        <th id="sup-header-2">Contact 2</th>
        <th id="sup-header-3">Company</th>
        <th id="sup-header-3">Jobs </th>
        <th id="sup-header-4">Status</th>
        <th></th>
    </tr>

</table>

@*<table class="table">
    <tr>
        <th>
           Customer
        </th>
        <th>
            Contact
        </th>
        <th>
            Email
        </th>
        <th>
           Category
        </th>
        <th>
           Company
        </th>
        <th>
            Jobs
        </th>
        <th>
            Status
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td >
                <h4 style="margin-top:0px;">@Html.DisplayFor(modelItem => item.Name)</h4>
                <p>
                    @Html.DisplayFor(modelItem => item.Remarks)
                </p>
            </td>
            <td>
                <p>
                    @if (item.Contact1 != null && item.Contact1.Trim().Length > 0)
                    { <a href="tel:@item.Contact1">@Html.DisplayFor(modelItem => item.Contact1)</a> }
                    <br />
                    @if (item.Contact2 != null && item.Contact2.Trim().Length > 0)
                    { <a href="tel:@item.Contact2">@Html.DisplayFor(modelItem => item.Contact2)</a> }
                </p>
            </td>
            <td>
                <p>
                    <a href="mailto:@item.Email">@Html.DisplayFor(modelItem => item.Email)</a>
                </p>
            </td>
            <td>
                <p>
                    @foreach (var cat in @item.categories)
                    {
                        <img src="~/@Html.DisplayFor(modelItem => cat.iconPath)" width="25" height="25" alt="@cat.Name" contextmenu="@cat.Name" title="@cat.Name" />
                    }
                </p>
            </td>
            <td>
                <span>
                    @{
                        var comp = item.companies.LastOrDefault();
                        if (comp != null) { 
                        <p>
                            <img src="~/@Html.DisplayFor(modelItem => comp.iconPath)" width="25" height="25" />

                            @Html.DisplayFor(modelItem => comp.Name)
                        </p>
                        }
                    }
                </span>
            </td>
            <td>
                <p>
                    @Html.DisplayFor(modelItem => item.JobID)
                </p>
            </td>
            <td>
                    @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.ActionLink("Details", "Details", new { id = item.Id , top = 30}) |
                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
            </td>
        </tr>
    }
</table>*@

<p>
    Customers 
    @Html.ActionLink("Companies", "Index", "CustEntMains", null, null) 
</p>
<script src="~/Scripts/jquery-3.3.1.js"></script>
<script src="~/Scripts/Job/CustomerList.js"></script>