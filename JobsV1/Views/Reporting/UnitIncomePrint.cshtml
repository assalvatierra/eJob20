@model IEnumerable<JobsV1.Controllers.cjobUnitIncome >

@{
    ViewBag.Title = "Unit Income Report";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<table>

    <tr>      
        <td valign="top">
            <img src="~/Images/LOGO_AJRENTACAR.jpg" width="135" />
        </td>
        <td>
            <span style="font:bold 21px arial, verdana;">AJ88 Car Rental Services </span>
            <span style="font:12px arial, verdana;color:royalblue">
                <br />Door 1, Travelers Inn Bldg., Matina Pangi Rd., Matina Crossing, Davao City, 8000 
                <br />Tel# (+63)822971831; (+63)9167558473; (+63)9330895358
                <br />Email: ajdavao88@gmail.com; Website: http://www.AJDavaoCarRental.com/
                <br />TIN: 414-880-772-001 (non-Vat)
            </span>
        </td>
    </tr>
</table>
<div class="container">
    <div class="row" >
        <h3>
           Unit Income Report :  
            
        </h3>
        <p>Date: <b>@ViewBag.sDate </b> to <b> @ViewBag.eDate </b></p> 
    <table class="table table-bordered">

    <tr>
        <th>
            Job#
        </th>
        <th>
            Unit
        </th>
        <th>
            Description
        </th>
        <th colspan="3">
            Amount
        </th>
        <th colspan="3">
            Income
        </th>
        <th>Status</th>
    </tr>

    <tr>
        <th colspan="3"></th>

        <th>Quoted</th>
        <th>Collected</th>
        <th>Expenses</th>

        <th>Tour</th>
        <th>Car</th>
        <th>Others</th>
        <th></th>

    </tr>


    @{
        decimal totalQuoted = 0;
        decimal totalCollected = 0;
        decimal totalExpenses = 0;
        decimal totalTourInc = 0;
        decimal totalCarInc = 0;
        decimal totalOtherInc = 0;

    }

    @if (Model.Count() == 0)
    {
        <tr>
            <td colspan="10" style="text-align:center;">
                <span>No Results Found</span>
            </td>
        </tr>
    }

    @foreach (var item in Model as IEnumerable<JobsV1.Controllers.cjobUnitIncome>)
    {
        <tr>
            <td>                
                <!-- Id -->
                @item.Id
            </td>
            <td>
                

                @foreach (var unit in item.Unit as IEnumerable<JobsV1.Controllers.cUnitList>)
                {
                    if(unit.ViewInfo == "Unit" || unit.ViewInfo == "UNIT")
                    {
                        <p style="font-size:12px;margin:0px;">-@unit.Unit (@unit.Code) </p>
                    }
                }
            </td>
            <td>
                <!--Desription-->
                <span style="color:black">
                    <span >
                        @item.JobDate.ToShortDateString() -
                    </span>
                    <span >
                        @item.Description
                    </span>
                </span>
            </td>
            <!--Amount-->
            <td>
                @string.Format("{0:N0}", item.Quoted)
               
            </td>
            <td>
                @string.Format("{0:N0}", item.Payment) 
                
            </td>
            <td>
                @string.Format("{0:N0}", item.Expenses)
                
            </td>

            <!--Income-->
            <td>
                @string.Format("{0:N0}", item.Tour)
            </td>
            <td>
                @string.Format("{0:N0}", item.Car)
            </td>
            <td>
                @string.Format("{0:N0}", item.Others)
            </td>
            <td>
                @if (item.isPosted)
                {
                    <text>
                        Posted
                    </text>
                }
                else
                {
                    <text>
                <span class="list-inline">
                    <img src="~/Images/Erp/icons/icons-error.png" width="20" />
                    <span>Unposted</span>
                </span>
                    </text>
                }
            </td>
        </tr>

        totalQuoted += (decimal)item.Quoted;
        totalCollected += item.Payment;
        totalExpenses += item.Expenses;
        totalCarInc += item.Car;
        totalTourInc += item.Tour;
        totalOtherInc += item.Others;
    }

    <tr>
        <th colspan="3"></th>
        <th>Quoted</th>
        <th>Collected</th>
        <th>Expenses</th>

        <th>Tour</th>
        <th>Car</th>
        <th>Others</th>
        <th></th>
    </tr>

    <tr style="font-weight:bold;background-color:#d8d8d8">
        <td colspan="3"><b>Total</b></td>

        <td>@string.Format("{0:N0}", totalQuoted)</td>
        <td>@string.Format("{0:N0}", totalCollected)</td>
        <td>@string.Format("{0:N0}", totalExpenses)</td>

        <td>@string.Format("{0:N0}", totalTourInc)</td>
        <td>@string.Format("{0:N0}", totalCarInc)</td>
        <td>@string.Format("{0:N0}", totalOtherInc)</td>
        <td></td>
    </tr>
    </table>
    </div>
</div>